!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t,n){"use strict";n.d(t,"m",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"k",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"l",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"o",function(){return p}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return m}),n.d(t,"n",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"g",function(){return y});var r="top",o="bottom",i="right",a="left",c="auto",s=[r,o,i,a],u="start",l="end",f="clippingParents",p="viewport",d="popper",m="reference",b=s.reduce(function(e,t){return e.concat([t+"-"+u,t+"-"+l])},[]),h=[].concat(s,[c]).reduce(function(e,t){return e.concat([t,t+"-"+u,t+"-"+l])},[]),y=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]},function(e,t){e.exports=React},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=n(3);function o(e){return e instanceof Object(r.a)(e).Element}function i(e){return e instanceof Object(r.a)(e).HTMLElement}},function(e,t,n){"use strict";function r(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return e.split("-")[0]}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return e?(e.nodeName||"").toLowerCase():null}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(2);function o(e){return(Object(r.a)(e)?e.ownerDocument:e.document).documentElement}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3);function o(e){return Object(r.a)(e).getComputedStyle(e)}},function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(3);function o(e){var t=Object(r.a)(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}},function(e,t,n){"use strict";function r(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(3),o=n(5),i=n(7),a=n(2);function c(e){return["table","td","th"].indexOf(Object(o.a)(e))>=0}n.d(t,"a",function(){return l});var s=function(){return void 0!==window.InstallTrigger};function u(e){var t;return!Object(a.b)(e)||!(t=e.offsetParent)||s()&&"fixed"===Object(i.a)(t).position?null:t}function l(e){for(var t=Object(r.a)(e),n=u(e);n&&c(n);)n=u(n);return n&&"body"===Object(o.a)(n)&&"static"===Object(i.a)(n).position?t:n||t}},function(e,t,n){"use strict";var r=n(5);function o(e){return"html"===Object(r.a)(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}var i=n(7),a=n(2);var c=n(3);function s(e,t){void 0===t&&(t=[]);var n=function e(t){if(["html","body","#document"].indexOf(Object(r.a)(t))>=0)return t.ownerDocument.body;if(Object(a.b)(t)){var n=Object(i.a)(t),c=n.overflow,s=n.overflowX,u=n.overflowY;if(/auto|scroll|overlay|hidden/.test(c+u+s))return t}return e(o(t))}(e),u="body"===Object(r.a)(n),l=u?Object(c.a)(n):n,f=t.concat(l);return u?f:f.concat(s(o(l)))}n.d(t,"a",function(){return s})},function(e,t){e.exports=ReactRedux},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(8),o=n(6),i=n(9);function a(e){return Object(r.a)(Object(o.a)(e)).left+Object(i.a)(e).scrollLeft}},function(e,t,n){"use strict";var r=n(8),o=n(9),i=n(3),a=n(2);var c=n(5),s=n(14),u=n(6);function l(e,t,n){var l;void 0===n&&(n=!1);var f,p,d=Object(r.a)(e),m={scrollLeft:0,scrollTop:0},b={x:0,y:0};return n||("body"!==Object(c.a)(t)&&(m=(f=t)!==Object(i.a)(f)&&Object(a.b)(f)?{scrollLeft:(p=f).scrollLeft,scrollTop:p.scrollTop}:Object(o.a)(f)),Object(a.b)(t)?((b=Object(r.a)(t)).x+=t.clientLeft,b.y+=t.clientTop):(l=Object(u.a)(t))&&(b.x=Object(s.a)(l))),{x:d.left+m.scrollLeft-b.x,y:d.top+m.scrollTop-b.y,width:d.width,height:d.height}}n.d(t,"a",function(){return l})},function(e,t,n){"use strict";n.d(t,"popperGenerator",function(){return d});var r=n(15),o=n(10),i=n(12),a=n(11),c=n(19),s=n(21),u=n(20),l=n(2),f={placement:"bottom",modifiers:[],strategy:"absolute"};function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function d(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,d=void 0===n?[]:n,m=t.defaultOptions,b=void 0===m?f:m;return function(e,t,n){void 0===n&&(n=b);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},f,{},b),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},h=[],y=!1,v={state:m,setOptions:function(n){g(),m.options=Object.assign({},b,{},m.options,{},n),m.scrollParents={reference:Object(l.a)(e)?Object(i.a)(e):[],popper:Object(i.a)(t)};var r=Object(c.a)(Object(u.a)([].concat(d,m.options.modifiers)));return m.orderedModifiers=r.filter(function(e){return e.enabled}),m.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var i=o({state:m,name:t,instance:v,options:r});h.push(i||function(){})}}),v.update()},forceUpdate:function(){if(!y){var e=m.elements,t=e.reference,n=e.popper;if(p(t,n)){m.rects={reference:Object(r.a)(t,Object(a.a)(n),"fixed"===m.options.strategy),popper:Object(o.a)(n)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(e){return m.modifiersData[e.name]=Object.assign({},e.data)});for(var i=0;i<m.orderedModifiers.length;i++)if(!0!==m.reset){var c=m.orderedModifiers[i],s=c.fn,u=c.options,l=void 0===u?{}:u,f=c.name;"function"==typeof s&&(m=s({state:m,options:l,name:f,instance:v})||m)}else m.reset=!1,i=-1}}},update:Object(s.a)(function(){return new Promise(function(e){v.forceUpdate(),e(m)})}),destroy:function(){g(),y=!0}};if(!p(e,t))return v;function g(){h.forEach(function(e){return e()}),h=[]}return v.setOptions(n).then(function(e){!y&&n.onFirstUpdate&&n.onFirstUpdate(e)}),v}}},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=Redux},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0);function o(e){var t=new Map,n=new Set,r=[];return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||function e(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach(function(r){if(!n.has(r)){var o=t.get(r);o&&e(o)}}),r.push(o)}(e)}),r}function i(e){var t=o(e);return r.g.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}},function(e,t,n){"use strict";function r(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(17),a=n.n(i),c=n(13),s=n(18);function u(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={filesRegistryUri:void 0,entryRegistryUri:void 0,publicKey:void 0,nonce:void 0,identified:!1,articles:{ids:[],entities:{}},writing:!1},d=Object(s.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"INIT":return l({},e,{filesRegistryUri:t.payload.filesRegistryUri,entryRegistryUri:t.payload.entryRegistryUri,publicKey:t.payload.publicKey,nonce:t.payload.nonce});case"IDENTIFIED":return l({},e,{identified:!0});case"UPDATE_NONCE":return l({},e,{nonce:t.payload});case"GO_HOME":return l({},e,{writing:!1});case"TOGGLE_WRITE":return l({},e,{writing:!e.writing});case"UPDATE_ARTICLES":var n=Object.keys(t.payload).sort(function(e,t){return parseInt(e)-parseInt(t)<0?1:-1});return l({},e,{articles:{ids:n,entities:t.payload}});default:return e}});function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,y(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){window.blockchainUtils&&(this.address=window.blockchainUtils.revAddressFromPublicKey(this.props.publicKey))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"form writing"},o.a.createElement("h4",{className:"title is-4"},"Write article"),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Title"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{onChange:function(t){return e.title=t.target.value},className:"input",type:"text",placeholder:"Article title"}))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Author"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{onChange:function(t){return e.author=t.target.value},className:"input",type:"text",placeholder:"Article author"}))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Address (for tipping)"),o.a.createElement("div",{className:"control"},o.a.createElement("input",{defaultValue:window.blockchainUtils?window.blockchainUtils.revAddressFromPublicKey(this.props.publicKey):void 0,onChange:function(t){e.address=t.target.value},className:"input",type:"text"}))),o.a.createElement("div",{className:"field"},o.a.createElement("label",{className:"label"},"Content"),o.a.createElement("div",{className:"control"},o.a.createElement("textarea",{onChange:function(t){e.content=t.target.value},className:"textarea",rows:"14",placeholder:"Hello world"}))),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"control"},o.a.createElement("button",{onClick:function(){e.props.sendArticle({entryRegistryUri:e.props.entryRegistryUri,filesRegistryUri:e.props.filesRegistryUri,nonce:e.props.nonce,title:encodeURI(e.title),author:encodeURI(e.author),content:encodeURI(e.content),address:e.address})},type:"button",className:"button is-light"},"Send"))))}}])&&b(n.prototype,r),i&&b(n,i),t}(),O=n(16),w=n(3),j={passive:!0};var E={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,a=r.resize,c=void 0===a||a,s=Object(w.a)(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(e){e.addEventListener("scroll",n.update,j)}),c&&s.addEventListener("resize",n.update,j),function(){i&&u.forEach(function(e){e.removeEventListener("scroll",n.update,j)}),c&&s.removeEventListener("resize",n.update,j)}},data:{}},x=n(4);function R(e){return e.split("-")[1]}function k(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var T=n(0);function N(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?Object(x.a)(o):null,a=o?R(o):null,c=n.x+n.width/2-r.width/2,s=n.y+n.height/2-r.height/2;switch(i){case T.m:t={x:c,y:n.y-r.height};break;case T.c:t={x:c,y:n.y+n.height};break;case T.k:t={x:n.x+n.width,y:s};break;case T.f:t={x:n.x-r.width,y:s};break;default:t={x:n.x,y:n.y}}var u=i?k(i):null;if(null!=u){var l="y"===u?"height":"width";switch(a){case T.l:t[u]=Math.floor(t[u])-Math.floor(n[l]/2-r[l]/2);break;case T.e:t[u]=Math.floor(t[u])+Math.ceil(n[l]/2-r[l]/2)}}return t}var C={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=N({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},D=n(11),S=n(6),U={top:"auto",right:"auto",bottom:"auto",left:"auto"};function P(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.offsets,a=e.position,c=e.gpuAcceleration,s=e.adaptive,u=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(i),l=u.x,f=u.y,p=i.hasOwnProperty("x"),d=i.hasOwnProperty("y"),m=T.f,b=T.m,h=window;if(s){var y=Object(D.a)(n);y===Object(w.a)(n)&&(y=Object(S.a)(n)),o===T.m&&(b=T.c,f-=y.clientHeight-r.height,f*=c?1:-1),o===T.f&&(m=T.k,l-=y.clientWidth-r.width,l*=c?1:-1)}var v,g=Object.assign({position:a},s&&U);return c?Object.assign({},g,((v={})[b]=d?"0":"",v[m]=p?"0":"",v.transform=(h.devicePixelRatio||1)<2?"translate("+l+"px, "+f+"px)":"translate3d("+l+"px, "+f+"px, 0)",v)):Object.assign({},g,((t={})[b]=d?f+"px":"",t[m]=p?l+"px":"",t.transform="",t))}var I={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,c={placement:Object(x.a)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};t.styles.popper=Object.assign({},t.styles.popper,{},P(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a}))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},P(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},A=n(5),M=n(2);var _={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];Object(M.b)(o)&&Object(A.a)(o)&&(Object.assign(o.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:"absolute",left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],o=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});Object(M.b)(r)&&Object(A.a)(r)&&(Object.assign(r.style,i),Object.keys(o).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};var L={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=void 0===o?[0,0]:o,a=T.h.reduce(function(e,n){return e[n]=function(e,t,n){var r=Object(x.a)(e),o=[T.f,T.m].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],c=i[1];return a=a||0,c=(c||0)*o,[T.f,T.k].indexOf(r)>=0?{x:c,y:a}:{x:a,y:c}}(n,t.rects,i),e},{}),c=a[t.placement],s=c.x,u=c.y;t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=u,t.modifiersData[r]=a}},W={left:"right",right:"left",bottom:"top",top:"bottom"};function H(e){return e.replace(/left|right|bottom|top/g,function(e){return W[e]})}var B={start:"end",end:"start"};function K(e){return e.replace(/start|end/g,function(e){return B[e]})}var F=n(8);var q=n(15),G=n(9);var V=n(12),J=n(7);function z(e){return parseFloat(e)||0}var Y=n(14);function X(e){var t=Object(w.a)(e),n=function(e){var t=Object(M.b)(e)?Object(J.a)(e):{};return{top:z(t.borderTopWidth),right:z(t.borderRightWidth),bottom:z(t.borderBottomWidth),left:z(t.borderLeftWidth)}}(e),r="html"===Object(A.a)(e),o=Object(Y.a)(e),i=e.clientWidth+n.right,a=e.clientHeight+n.bottom;return r&&t.innerHeight-e.clientHeight>50&&(a=t.innerHeight-n.bottom),{top:r?0:e.clientTop,right:e.clientLeft>n.left?n.right:r?t.innerWidth-i-o:e.offsetWidth-i,bottom:r?t.innerHeight-a:e.offsetHeight-a,left:r?o:e.clientLeft}}function Q(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Z(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function $(e,t){return t===T.o?Z(function(e){var t=Object(w.a)(e);return{width:t.innerWidth,height:t.innerHeight,x:0,y:0}}(e)):Object(M.b)(t)?Object(F.a)(t):Z(function(e){var t=Object(w.a)(e),n=Object(G.a)(e),r=Object(q.a)(Object(S.a)(e),t);return r.height=Math.max(r.height,t.innerHeight),r.width=Math.max(r.width,t.innerWidth),r.x=-n.scrollLeft,r.y=-n.scrollTop,r}(Object(S.a)(e)))}function ee(e,t,n){var r="clippingParents"===t?function(e){var t=Object(V.a)(e),n=["absolute","fixed"].indexOf(Object(J.a)(e).position)>=0&&Object(M.b)(e)?Object(D.a)(e):e;return Object(M.a)(n)?t.filter(function(e){return Object(M.a)(e)&&Q(e,n)}):[]}(e):[].concat(t),o=[].concat(r,[n]),i=o[0],a=o.reduce(function(t,n){var r=$(e,n),o=X(Object(M.b)(n)?n:Object(S.a)(e));return t.top=Math.max(r.top+o.top,t.top),t.right=Math.min(r.right-o.right,t.right),t.bottom=Math.min(r.bottom-o.bottom,t.bottom),t.left=Math.max(r.left+o.left,t.left),t},$(e,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function te(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function ne(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function re(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.boundary,a=void 0===i?T.d:i,c=n.rootBoundary,s=void 0===c?T.o:c,u=n.elementContext,l=void 0===u?T.i:u,f=n.altBoundary,p=void 0!==f&&f,d=n.padding,m=void 0===d?0:d,b=te("number"!=typeof m?m:ne(m,T.b)),h=l===T.i?T.j:T.i,y=e.elements.reference,v=e.rects.popper,g=e.elements[p?h:l],O=ee(Object(M.a)(g)?g:Object(S.a)(e.elements.popper),a,s),w=Object(F.a)(y),j=N({reference:w,element:v,strategy:"absolute",placement:o}),E=Z(Object.assign({},v,{},j)),x=l===T.i?E:w,R={top:O.top-x.top+b.top,bottom:x.bottom-O.bottom+b.bottom,left:O.left-x.left+b.left,right:x.right-O.right+b.right},k=e.modifiersData.offset;if(l===T.i&&k){var C=k[o];Object.keys(R).forEach(function(e){var t=[T.k,T.c].indexOf(e)>=0?1:-1,n=[T.m,T.c].indexOf(e)>=0?"y":"x";R[e]+=C[n]*t})}return R}var oe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.fallbackPlacements,i=n.padding,a=n.boundary,c=n.rootBoundary,s=n.flipVariations,u=void 0===s||s,l=t.options.placement,f=Object(x.a)(l),p=o||(f!==l&&u?function(e){if(Object(x.a)(e)===T.a)return[];var t=H(e);return[K(e),t,K(t)]}(l):[H(l)]),d=[l].concat(p).reduce(function(e,n){return e.concat(Object(x.a)(n)===T.a?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,c=n.flipVariations,s=R(r),u=(s?c?T.n:T.n.filter(function(e){return R(e)===s}):T.b).reduce(function(t,n){return t[n]=re(e,{placement:n,boundary:o,rootBoundary:i,padding:a})[Object(x.a)(n)],t},{});return Object.keys(u).sort(function(e,t){return u[e]-u[t]})}(t,{placement:n,boundary:a,rootBoundary:c,padding:i,flipVariations:u}):n)},[]),m=t.rects.reference,b=t.rects.popper,h=new Map,y=!0,v=d[0],g=0;g<d.length;g++){var O=d[g],w=Object(x.a)(O),j=R(O)===T.l,E=[T.m,T.c].indexOf(w)>=0,k=E?"width":"height",N=re(t,{placement:O,boundary:a,rootBoundary:c,padding:i}),C=E?j?T.k:T.f:j?T.c:T.m;m[k]>b[k]&&(C=H(C));var D=H(C),S=[N[w]<=0,N[C]<=0,N[D]<=0];if(S.every(function(e){return e})){v=O,y=!1;break}h.set(O,S)}if(y)for(var U=function(e){var t=d.find(function(t){var n=h.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return v=t,"break"},P=u?3:1;P>0&&"break"!==U(P);P--);t.placement!==v&&(t.modifiersData[r]._skip=!0,t.placement=v,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ie(e,t,n){return Math.max(e,Math.min(t,n))}var ae=n(10);function ce(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function se(e){return[T.m,T.k,T.c,T.f].some(function(t){return e[t]>=0})}var ue=[E,C,I,_,L,oe,{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,c=void 0!==a&&a,s=n.boundary,u=n.rootBoundary,l=n.padding,f=n.tether,p=void 0===f||f,d=n.tetherOffset,m=void 0===d?0:d,b=re(t,{boundary:s,rootBoundary:u,padding:l}),h=Object(x.a)(t.placement),y=R(t.placement),v=!y,g=k(h),O="x"===g?"y":"x",w=t.modifiersData.popperOffsets,j=t.rects.reference,E=t.rects.popper,N="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,C={x:0,y:0};if(i){var D="y"===g?T.m:T.f,S="y"===g?T.c:T.k,U="y"===g?"height":"width",P=w[g],I=w[g]+b[D],A=w[g]-b[S],M=p?-E[U]/2:0,_=y===T.l?j[U]:E[U],L=y===T.l?-E[U]:-j[U],W=t.elements.arrow,H=p&&W?Object(ae.a)(W):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},K=B[D],F=B[S],q=ie(0,j[U],H[U]),G=v?j[U]/2-M-q-K-N:_-q-K-N,V=v?-j[U]/2+M+q+F+N:L+q+F+N,J=t.modifiersData.offset?t.modifiersData.offset[t.placement][g]:0,z=w[g]+G-J,Y=w[g]+V-J,X=ie(p?Math.min(I,z):I,P,p?Math.max(A,Y):A);w[g]=X,C[g]=X-P}if(c){var Q="x"===g?T.m:T.f,Z="x"===g?T.c:T.k,$=w[O],ee=ie($+b[Q],$,$-b[Z]);t.modifiersData.popperOffsets[O]=ee,C[O]=ee-$}t.modifiersData[r]=C},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Object(x.a)(n.placement),c=k(a),s=[T.f,T.k].indexOf(a)>=0?"height":"width";if(o){var u=n.modifiersData[r+"#persistent"].padding,l=Object(ae.a)(o),f="y"===c?T.m:T.f,p="y"===c?T.c:T.k,d=(n.rects.reference[s]+n.rects.reference[c]-i[c]-n.rects.popper[s])/2-(i[c]-n.rects.reference[c])/2,m=ie(u[f],n.rects.popper[s]/2-l[s]/2+d,n.rects.popper[s]-l[s]-u[p]),b=c;n.modifiersData[r]=((t={})[b]=m,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,o=n.element,i=void 0===o?"[data-popper-arrow]":o,a=n.padding,c=void 0===a?0:a;("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&Q(t.elements.popper,i)&&(t.elements.arrow=i,t.modifiersData[r+"#persistent"]={padding:te("number"!=typeof c?c:ne(c,T.b))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=re(t,{elementContext:"reference"}),c=re(t,{altBoundary:!0}),s=ce(a,r),u=ce(c,o,i),l=se(s),f=se(u);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}}],le=Object(O.popperGenerator)({defaultModifiers:ue});function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return r=this,o=(e=de(t)).call.apply(e,[this].concat(a)),n=!o||"object"!==fe(o)&&"function"!=typeof o?me(r):o,he(me(n),"state",{tooltipDisplayed:!1}),he(me(n),"listenningForClicks",!1),he(me(n),"saveTitleRef",function(e){n.titleRev=e}),he(me(n),"saveTipRef",function(e){n.tipRev=e}),he(me(n),"listenForClicks",function(e){n.state.tooltipDisplayed?n.setState({tooltipDisplayed:!1}):e.target.className==="tip-button ".concat(n.props.id)&&(n.setState({tooltipDisplayed:!0}),le(n.titleRev,n.tipRev,{placement:"right"}))}),he(me(n),"onDisplayTip",function(e){n.listenningForClicks||(n.setState({tooltipDisplayed:!0}),le(n.titleRev,n.tipRev,{placement:"right"}),document.addEventListener("click",n.listenForClicks),n.listenningForClicks=!0)}),he(me(n),"onTip",function(e){n.props.onTip(e,n.props.address)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.listenForClicks)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{key:this.props.id,className:"article"},o.a.createElement("div",{style:{display:this.state.tooltipDisplayed?"block":"none"},ref:this.saveTipRef,className:"tip-tooltip ".concat(this.props.id)},o.a.createElement("ul",null,[1,2,5,10].map(function(t){return o.a.createElement("li",{onClick:function(){return e.onTip(t)},key:t},"Tip ",t," REV")}))),o.a.createElement("h3",{className:"title is-3"},o.a.createElement("span",{ref:this.saveTitleRef},decodeURI(this.props.title)),this.props.address?o.a.createElement("span",{className:"tip-button ".concat(this.props.id),onClick:this.onDisplayTip},"tip"):void 0),o.a.createElement("h6",{className:"title is-6"},this.props.author&&this.props.author.length?o.a.createElement("span",null,"Published by ",decodeURI(this.props.author),", "):void 0,new Date(parseInt(this.props.id)).toString()),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"is-medium"},decodeURI(this.props.content))))}}])&&pe(n.prototype,r),i&&pe(n,i),t}();function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ge=function(e){var t=ve(Object(r.useState)(!1),2),n=t[0],i=t[1];return 0!==e.articles.ids.length||n||(i(!0),e.loadArticles(e.filesRegistryUri)),0===e.articles.ids.length?o.a.createElement("p",{className:"no-articles"},"No articles"):o.a.createElement("div",null,e.articles.ids.map(function(t){return o.a.createElement(ye,{key:t,id:t,title:e.articles.entities[t].title,author:e.articles.entities[t].author,content:e.articles.entities[t].content,address:e.articles.entities[t].address,onTip:e.onTip})}))};var Oe=function(e){return new Promise(function(t,n){dappyRChain.fetch("dappy://rchain/betanetwork/".concat(e)).then(function(r){var o=JSON.parse(r).expr[0],i=blockchainUtils.rhoValToJs(o),a=Object.keys(i.files).filter(function(e){return"index"!==e});a.length?dappyRChain.fetch("dappy://rchain/betanetwork/".concat(a.map(function(t){return"".concat(e.replace("rho:id:",""),".").concat(t)}).join(","))).then(function(e){var n,r,o,i;if(1===a.length){var c=JSON.parse(e).expr[0],s=blockchainUtils.rhoValToJs(c);r={},o=s.id,i=s,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,n=r}else{var u=JSON.parse(e);n={},u.results.forEach(function(e){if(e.success){var t=blockchainUtils.rhoValToJs(JSON.parse(e.data).expr[0]);n[e.id]=t}else console.error("One explore-deploy call was not successful")})}t(n)}).catch(function(e){n(e)}):t([])}).catch(function(e){n(e)})})},we=Object(c.connect)(function(e){return{writing:e.writing,articles:e.articles,entryRegistryUri:e.entryRegistryUri,publicKey:e.publicKey,nonce:e.nonce,filesRegistryUri:e.filesRegistryUri,identified:e.identified}},function(e){return{identify:function(t){"undefined"!=typeof dappyRChain?dappyRChain.identify({publicKey:t}).then(function(n){console.log(n),n&&n.identified&&n.publicKey===t&&e({type:"IDENTIFIED"})}).catch(function(e){console.log(e)}):console.warn("window.dappyRChain is undefined, cannot identify")},loadArticles:function(t){"undefined"!=typeof dappyRChain?Oe(t).then(function(t){e({type:"UPDATE_ARTICLES",payload:t})}).catch(function(e){console.error("Something went wrong when loading articles"),console.log(e)}):console.warn("window.dappyRChain is undefined, cannot fetch articles")},goHome:function(t){e({type:"GO_HOME"}),"undefined"!=typeof dappyRChain?Oe(t).then(function(t){e({type:"UPDATE_ARTICLES",payload:t})}).catch(function(e){console.error("Something went wrong when loading articles"),console.log(e)}):console.warn("window.dappyRChain is undefined, cannot fetch articles")},toggleWrite:function(t){return e({type:"TOGGLE_WRITE"})},sendArticle:function(t){if("undefined"!=typeof dappyRChain){var n=blockchainUtils.generateNonce(),r=(new Date).getTime().toString();dappyRChain.transaction({term:"new basket, entryCh, lookup(`rho:registry:lookup`), stdout(`rho:io:stdout`) in {\n            lookup!(`rho:id:".concat(t.entryRegistryUri,'`, *entryCh) |\n            for(entry <- entryCh) {\n              entry!(\n                {\n                  "type": "ADD",\n                  "payload": {\n                    "file": {\n                      "id": "').concat(r,'",\n                      "title": "').concat(t.title,'",\n                      "author": "').concat(t.author,'",\n                      "content": "').concat(t.content,'",\n                      "address": "').concat(t.address,'",\n                    },\n                    "nonce": "').concat(n,'",\n                    "signature": "SIGN",\n                    "id": "').concat(r,'",\n                  }\n                },\n                *stdout\n              )\n            } |\n            basket!({ "status": "completed" })\n          }'),signatures:{SIGN:t.nonce}}).then(function(e){return console.log(e),Oe(t.filesRegistryUri)}).then(function(t){e({type:"UPDATE_ARTICLES",payload:t})}).catch(function(e){console.error("Something went wrong"),console.log(e)})}else console.warn("window.dappyRChain is undefined, cannot send article")},onTip:function(e,t){"undefined"!=typeof dappyRChain?dappyRChain.requestPayment({from:void 0,to:t,amount:e}).then(function(e){console.log(e),store.dispatch({type:"TRANSACTION_SUCCESFULL",payload:"Transaction aired succesfully"})}).catch(function(e){console.log(e),store.dispatch({type:"TRANSACTION_ERROR",payload:e.transaction.value.message})}):console.warn("window.dappyRChain is undefined, cannot tip author")}}})(function(e){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",{className:"title is-2"},je),o.a.createElement("div",{className:"columns left-menu"},o.a.createElement("div",{className:"column is-one-quarter"},o.a.createElement("a",{onClick:function(){return e.goHome(e.filesRegistryUri)}},"Home"),e.publicKey&&e.identified?o.a.createElement("a",{onClick:function(){return e.toggleWrite()}},"Write article"):o.a.createElement("a",{onClick:function(){return e.identify(e.publicKey)}},"Identify")),o.a.createElement("div",{className:"column is-three-quarter"},e.writing&&o.a.createElement(g,{entryRegistryUri:e.entryRegistryUri,publicKey:e.publicKey,nonce:e.nonce,sendArticle:e.sendArticle}),!e.writing&&o.a.createElement(ge,{filesRegistryUri:e.filesRegistryUri,loadArticles:e.loadArticles,articles:e.articles,onTip:e.onTip}))))});n.d(t,"BLOG_TITLE",function(){return je});var je="My cool blog",Ee=function(){return o.a.createElement(c.Provider,{store:d},o.a.createElement(we,null))};window.onload=function(){a.a.render(o.a.createElement(Ee,null),document.getElementById("root"))},"undefined"!=typeof dappyRChain&&dappyRChain.fetch("dappy://rchain/betanetwork/REGISTRY_URI").then(function(e){var t=JSON.parse(e).expr[0],n=blockchainUtils.rhoValToJs(t);d.dispatch({type:"INIT",payload:{filesRegistryUri:n.filesRegistryUri.replace("rho:id:",""),entryRegistryUri:n.entryRegistryUri.replace("rho:id:",""),publicKey:n.publicKey,nonce:n.nonce}}),a.a.render(o.a.createElement(Ee,null),document.getElementById("root"))}).catch(function(e){console.error("Something went wrong when retreiving the files module object"),console.log(e)})}]);